# TIL 2025-08-20

## 🎯 오늘 구현한 것

### 1. 카카오맵 LOD 최적화

- **문제**: 마커 렌더링 성능 이슈, 줌/팬 시 버벅임
- **해결**: 뷰포트 기반 필터링 + 줌 레벨별 마커 타입 분리
- **핵심**: 복잡한 풀링/클러스터링 제거 → 단순한 구현이 더 효과적

```typescript
// 핵심 로직
const visibleMarkers = useMemo(() => {
  const allowedTypes = getMarkerTypeFilter(zoomLevel);
  return regions.filter(
    (region) =>
      allowedTypes.includes(region.type) &&
      isPointInBounds(region.latitude, region.longitude, 0.3)
  );
}, [regions, zoomLevel, isPointInBounds]);
```

### 2. 마커 클릭 즉시 반영

- **문제**: 디바운싱으로 인한 지연, 잘못된 줌 레벨
- **해결**: `setZoomLevel` + `setDebouncedZoomLevel` 동시 호출

```typescript
// 디바운싱 우회
setZoomLevel(newZoomLevel);
setDebouncedZoomLevel(newZoomLevel);
if (zoomTimeoutRef.current) {
  clearTimeout(zoomTimeoutRef.current);
}
```

### 3. 섹터 데이터 동기화

- **문제**: 프론트에서 섹터 정보 "undefined"
- **해결**: 백엔드 DTO + 서비스 매핑 로직 수정

```java
// 백엔드 수정
.sector(rs.getStock().getSector() != null ?
       rs.getStock().getSector() : "기타")
```

### 4. 주식 상세 UI 개선

- **변경**: 상위 3개 리스트 교체 → 밑에 추가 표시
- **추가**: 선택된 주식 시각적 강조, 순위별 아이콘, 버튼 텍스트 간소화

## 🧠 오늘의 학습

### 핵심 깨달음

> **"복잡한 최적화 < 사용자가 이해하기 쉬운 단순한 구현"**

### 기술적 포인트

- **성능 vs UX**: 디바운싱과 즉시 반응성의 균형
- **풀스택 디버깅**: 프론트 이슈의 근본 원인이 백엔드에 있는 경우
- **점진적 단순화**: 과도한 최적화보다 안정적 구현 우선

## 🚀 내일 할 것

1. **WTS Phase 1**: KIS API 연동 기초 시작
2. **실시간 데이터**: 5분 주기 주식 정보 업데이트
3. **차트 시스템**: TradingView 라이브러리 연동 검토

## 📊 WTS 로드맵 설계 완료

```
Phase 1 (2-3주): 📡 KIS API 기초 + 시세 조회
Phase 2 (3-4주): 📈 차트 시스템
Phase 3 (2-3주): 💰 계좌 조회 (읽기 전용)
Phase 4 (2-3주): 🖥️ 거래 UI/UX
Phase 5 (3-4주): 💸 실제 거래 (고위험)
Phase 6 (1-2주): 🔐 보안 강화
```

---

**Today's Key Insight**: 기술적 완벽함보다 사용자 경험이 우선이다.
